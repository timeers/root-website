{% extends 'the_keep/base.html' %}

{% block title %} - {{ player.discord }}{% endblock %}

{% block content %}
    <div class="media content-section">

            <img class="article-img" src="{{ player.image.url }}">
            <div class="media-body">
                <h1 class="account-heading">{{ player.name }}</h1>
                {% if user.profile.player or player == user.profile %}
                {% if player.discord %}
                    <span class="text-secondary">Discord: {{ player.discord }}</span><br>
                {% endif %}
                {% if player.dwd %}
                    {% if player.league %}
                        <span class="text-secondary">Digital League: {{ player.dwd }}</span><br>
                    {% else %}
                        <span class="text-secondary">DWD: {{ player.dwd }}</span><br>
                    {% endif %}
                {% endif %}
                {% endif %}
                
            </div>
            {% if player == user.profile %}
                <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{% url 'profile' %}">Edit Profile</a>
            {% elif user.profile.player %}
                <!-- Bookmarks -->
                {% include 'the_gatehouse/partials/bookmarks.html' %}
            {% endif %}

    </div>
    
{% if user.profile.player or user.profile == player %}
    <div class="container mt-4">

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            {% if player.efforts.count %}
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="games-tab" data-bs-toggle="tab" href="#games" role="tab" aria-controls="games" aria-selected="false" 
                hx-get="{% url 'player-games' player.slug %}" 
                hx-target="#tab-contents" 
                hx-push-url="false">Games ({{ player.efforts.count }})</a>
            </li>
            {% endif %}
            {% if player == user.profile and player.bookmarkedgames.count %}
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="game-bookmarks-tab" data-bs-toggle="tab" href="#game-bookmarks" role="tab" aria-controls="game-bookmarks" aria-selected="false" 
                hx-get="{% url 'game-bookmarks' user.profile.slug %}" 
                hx-target="#tab-contents" 
                hx-push-url="false"><i class="bi bi-bookmark-check-fill"></i> Saved Games ({{ player.bookmarkedgames.count }})</i></a>
            </li>
            {% endif %}
            {% if user.profile.weird and player.posts.count %}
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="components-tab" data-bs-toggle="tab" href="#components" role="tab" aria-controls="components" aria-selected="false" 
                hx-get="{% url 'designer-components' player.slug %}" 
                hx-target="#tab-contents" 
                hx-push-url="false">Components ({{ player.posts.count }})</a>
            </li>
            {% endif %}
            {% if player == user.profile and player.bookmarkedposts.count %}
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="post-bookmarks-tab" data-bs-toggle="tab" href="#post-bookmarks" role="tab" aria-controls="post-bookmarks" aria-selected="false" 
                hx-get="{% url 'post-bookmarks' user.profile.slug %}" 
                hx-target="#tab-contents" 
                hx-push-url="false"><i class="bi bi-bookmark-check-fill"></i> Bookmarks ({{ player.bookmarkedposts.count }})</a>
            </li>
            {% endif %}
            {% if player.efforts.count %}
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="stats-tab" data-bs-toggle="tab" href="#stats" role="tab" aria-controls="stats" aria-selected="false" 
                hx-get="{% url 'player-stats' player.slug %}" 
                hx-target="#tab-contents" 
                hx-push-url="false">Stats</a>
            </li>
            {% endif %}
        </ul>
    </div>


<div id="tab-contents">

</div>
{% endif %}
{% endblock content %}