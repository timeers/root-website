{% extends 'the_keep/base.html' %}

{% block title %} - {{ player.discord }}{% endblock %}

{% block content %}
    <div class="content-section">
        <div class="media">
        <img class="article-img" src="{{ player.image.url }}">
            <div class="media-body">
                <h1 class="account-heading">{{ player.display_name }}</h1>
                {% if player.discord %}
                    <span class="text-secondary">Discord: {{ player.discord }}</span><br>
                {% endif %}
                {% if player.dwd %}
                    {% if player.league %}
                        <span class="text-secondary">Digital League: {{ player.dwd }}</span><br>
                    {% else %}
                        <span class="text-secondary">DWD: {{ player.dwd }}</span><br>
                    {% endif %}
                {% endif %}
                {% if quantity_faction %}
                <div>Most played Faction: {{ quantity_faction }}: {{ quantity_count }} Games</div>
                {% endif %}
                {% if quality_faction %}
                <div>Highest winrate with: {{ quality_faction }}: {{ quality_winrate|floatformat:2 }}%</div>
                {% endif %}
            </div>
 
            <!-- Winrate -->
            <div class="media-body">
                <div>{{ player.winrate|floatformat:2 }}% Winrate</div>
                <div>{{ player.games_played }} Games Played</div>
            </div>
            
            {% if player == user.profile %}
            <div class="media-body">
                <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{% url 'profile' %}">Edit Profile</a>
            </div>
            {% endif %}

            <!-- Bookmarks -->
            {% if user.is_authenticated %}
                {% include 'the_gatehouse/partials/bookmarks.html' %}
            {% endif %}

        </div>
    </div>
    
    <div class="btn-group" role="group" aria-label="Profile Buttons">
        <button type="button" class="btn btn-secondary">Components</button>
        <button type="button" class="btn btn-secondary active">Games</button>
      </div>


      <div class="container mt-4">

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="home-tab" data-bs-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Home</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Profile</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="contact-tab" data-bs-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Contact</a>
            </li>
        </ul>
    </div>

<div id="tab-contents">

    <h2>{{ player.name }}'s Games</h2>

    <div id="games-container">

        {% if games.count > 0 %}
        Games found
            {% include 'the_warroom/partials/hx_game_list.html' %}
        {% else %}
            No games found for this player.
        {% endif %}
        {% for game in games %}
            {% include 'the_warroom/partials/game_detail.html' %}
        {% empty %}
            No games found for this player.
        {% endfor %}
    </div>
    
</div>

{% endblock content %}