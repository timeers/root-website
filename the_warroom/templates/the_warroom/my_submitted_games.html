{% extends 'the_keep/base.html' %}
{% load static i18n %}
{% block title %}{% trans 'My Submitted Games' %} | {% endblock %}

{% block meta %}    <!-- Open Graph tags -->
<meta property="og:type" content="website">
<meta property="og:url" content="{{ request.build_absolute_uri }}">
<meta property="og:image" content="{% static 'images/battlefield-icon.png' %}">
<meta property="og:site_name" content="Root Database">
<meta property="og:title" content="My Submitted Games">
<meta property="og:description" content="Games I've Recorded on the Root Database">
<meta name="description" content="Games I've Recorded on the Root Database">
{% endblock meta%}

{% block content %}
{% include 'the_warroom/partials/warroom_nav_header.html' with active_page='submitted-games' %}

{% url 'my-submitted-games' as filter_url %}
{% include 'the_warroom/partials/universal_game_filter.html' with form=form filter_url=filter_url %}

{% include 'the_warroom/partials/game_list_home.html' %}




{% endblock content %}


{% block scripts %}
    <script>
        // Universal select2 initialization - handles both singular and plural field names
        const selectPlaceholders = {
            '#id_faction': "{% trans 'Select Factions' %}",
            '#id_factions': "{% trans 'Select Factions' %}",
            '#id_player': "{% trans 'Select Players' %}",
            '#id_players': "{% trans 'Select Players' %}",
            '#id_vagabond': "{% trans 'Select Vagabonds' %}",
            '#id_vagabonds': "{% trans 'Select Vagabonds' %}",
            '#id_map': "{% trans 'Select a Map' %}",
            '#id_deck': "{% trans 'Select a Deck' %}"
        };

        // Apply select2 only to fields that exist on the page
        Object.keys(selectPlaceholders).forEach(id => {
            if ($(id).length) {
                $(id).select2({
                    placeholder: selectPlaceholders[id],
                    allowClear: true,
                    width: '100%'
                });
            }
        });

        if ($('#id_official').length) {
            $('#id_official').select2({
                width: '100%'
            });
        }
    </script>
{% endblock %}
