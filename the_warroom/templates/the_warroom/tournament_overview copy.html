{% extends 'the_keep/base.html' %}
{% block content %}

<h1>{{ object }}</h1>

{% if user.profile.admin %}
<div>
    <a class="btn btn-outline-info btn-sm mt-1 mb-1" href="{% url 'tournament-update' object.slug %}">Update</a>
    <a class="btn btn-outline-success btn-sm mt-1 mb-1" href="{% url 'round-create' object.slug %}">Add Round</a>
    <a class="btn btn-outline-warning btn-sm mt-1 mb-1" href="{% url 'tournament-players' object.slug %}">Manage Players</a>
    <a class="btn btn-outline-warning btn-sm mt-1 mb-1" href="{% url 'tournament-assets' object.slug %}">Manage Assets</a>
</div>
{% endif %}



<div class="container mt-4">
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <a class="nav-link active" 
               id="tournament-{{ object.id }}-tab" 
               data-bs-toggle="tab" 
               href="#tournament-{{ object.id }}" 
               role="tab" 
               aria-controls="tournament-{{ object.id }}" 
               aria-selected="true" 
               hx-get="{{ object.get_absolute_url }}" 
               hx-target="#tab-contents" 
               hx-push-url="false">
               Overall
            </a>
        </li>
        {% if user.profile.admin %}
            {% for round in future_rounds %}
                <li class="nav-item" role="presentation">
                    <a class="nav-link" 
                    id="round-{{ round.id }}-tab" 
                    data-bs-toggle="tab" 
                    href="#round-{{ round.id }}" 
                    role="tab" 
                    aria-controls="round-{{ round.id }}" 
                    aria-selected="false" 
                    hx-get="{{ round.get_absolute_url }}" 
                    hx-target="#tab-contents" 
                    hx-push-url="false">
                    {{ round.name }} ({{ round.start_date | date:"Y-m-d" }})
                    </a>
                </li>
            {% endfor %}
        {% endif %}
        {% for round in active_rounds %}
            <li class="nav-item" role="presentation">
                <a class="nav-link" 
                   id="round-{{ round.id }}-tab" 
                   data-bs-toggle="tab" 
                   href="#round-{{ round.id }}" 
                   role="tab" 
                   aria-controls="round-{{ round.id }}" 
                   aria-selected="false" 
                   hx-get="{{ round.get_absolute_url }}" 
                   hx-target="#tab-contents" 
                   hx-push-url="false">
                   {{ round.name }} - ({{ round.round_number }})
                </a>
            </li>
        {% endfor %}


    </ul>
</div>


<div id="tab-contents">
    
    {% include 'the_warroom/tournament_round_detail.html' %}

</div>











<div class="container mt-4">
    <!-- Tab navigation -->
    <ul class="nav nav-tabs" id="tournamentTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="overview-tab" data-bs-toggle="tab" href="#overview" role="tab" aria-controls="overview" aria-selected="false">overview</a>
        </li>

        {% for round in active %}
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="{{ round.slug }}-tab" data-bs-toggle="tab" href="#{{ round.slug }}" role="tab" aria-controls="{{ round.slug }}" aria-selected="false">{{ round.slug }}</a>
        </li>
        {% endfor %}


        <li class="nav-item" role="presentation">
            <a class="nav-link active" id="past-tab" data-bs-toggle="tab" href="#past" role="tab" aria-controls="past" aria-selected="false">past</a>
        </li>




        {% if user.profile.admin %}
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="scheduled-tab" data-bs-toggle="tab" href="#scheduled" role="tab" aria-controls="scheduled" aria-selected="true">Scheduled</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="admin-tab" data-bs-toggle="tab" href="#admin" role="tab" aria-controls="admin" aria-selected="true">Admin</a>
        </li>
        {% endif %}
    </ul>

    <!-- Tab content -->
    <div class="tab-content" id="tournamentTabsContent">
        <!-- Overview -->
        <div class="tab-pane fade" id="overview" role="tabpanel" aria-labelledby="overview-tab">
            <h3>{{ object.name }}</h3>
            {% include 'the_warroom/tournament_round_detail.html' %}
        </div>

        <!-- Past -->
        <div class="tab-pane fade show active" id="past" role="tabpanel" aria-labelledby="past-tab">
            <h3>Past Rounds</h3>

            {% with past as tournaments %}
                {% include 'the_warroom/partials/tournament_list.html' %}
            {% endwith %}
        </div>

        <!-- Scheduled -->
        <div class="tab-pane fade" id="scheduled" role="tabpanel" aria-labelledby="scheduled-tab">
            <h3>Scheduled Rounds</h3>
            {% with scheduled as tournaments %}
                {% include 'the_warroom/partials/tournament_list.html' %}
            {% endwith %}
        </div>

        <!-- Admin -->
        <div class="tab-pane fade" id="admin" role="tabpanel" aria-labelledby="admin-tab">
            <h3>Tournament Admin</h3>

        </div>
        
    </div>
</div>














{% endblock %}