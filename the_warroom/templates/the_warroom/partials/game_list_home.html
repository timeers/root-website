{% load i18n %}
<div id="games-container">

    {% if page_obj.number == 1 %}
        <article class="media content-section">
            <div class="media-body">
        <h3 class='root-title'>{% trans 'Total Games' %} ({{ games_count }})</h3> 
            </div>
        </article>
    {% endif %}
<div id="search-contents">
{% if games %}
    {% for game in games %}


        {% if forloop.last and games.has_next %}
            {% if not player_view %}
                <div hx-trigger="revealed" 
                hx-get="{% url 'games-home' %}?page={{ page_obj.number|add:1 }}"
                hx-target="#search-contents"
                hx-swap="beforeend"
                hx-include="#gamefilterform"
                hx-indicator="#spinner">
            {% else %}
                <div hx-trigger="revealed" 
                hx-get="{% url 'player-games' slug=player_slug %}?page={{ page_obj.number|add:1 }}"
                hx-target="#search-contents"
                hx-swap="beforeend"
                hx-include="#gamefilterform"
                hx-indicator="#spinner">
            {% endif %}
        {% else %}
            <div>
        {% endif %}


        
        {% include 'the_warroom/partials/game_detail_button.html' %}
        

        </div>

        {% if forloop.last and games.has_next %}
            {% include 'the_gatehouse/partials/spinner.html' %}
        {% endif %}

    {% endfor %}

{% comment %} <div id="spinner" class="d-flex justify-content-center htmx-indicator">
    <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div> {% endcomment %}


{% else %}
    {% trans 'No matching games recorded.' %}
{% endif %}
    </div>
</div>