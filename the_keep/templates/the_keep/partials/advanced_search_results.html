{% load i18n %}
<div id="search-results">
    <div id="search-contents">
{% if posts %}
    {% for object in posts %}
        
            {% if forloop.last and posts.has_next %}
            <div id="{{ forloop.counter }}" 
            hx-trigger="revealed" 
            hx-get="{% url 'advanced-search' component_type=component_type %}"
            hx-include="#advanced-search-form"
            hx-vals='{"page": "{{ posts.next_page_number }}"}'
            hx-target="#search-contents"
            hx-swap="beforeend"
            hx-indicator="#spinner">
            {% else %}
            <div id="{{ forloop.counter }}">
            {% endif %}
            
            {% include 'the_keep/partials/post.html' %}
            
            </div>

            {% if forloop.last and posts.has_next %}
                {% include 'the_gatehouse/partials/spinner.html' %}
            {% endif %}

    {% endfor %} 


{% else %}
    <h3>{% trans 'No Results' %}</h3>
{% endif %}

        </div>
</div>