{% extends 'the_keep/template.html' %}

{% block template %}
    <main role="main" class="{% block main_class %}container main-content{% endblock %}" id="main-content">
        
      <div class="{% block main_row_class %}row{% endblock %}">
        <div class="{% block main_width_class %}col-md-11{% endblock %}">
            {% if background_image %}
                <div class='background-image-padding' style="{{ background_image.style }}"></div>
            {% endif %}

            {% if global_message %}
                <div class="alert alert-{{ global_message_type }} alert-dismissible fade show" role="alert">
                    {{ global_message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endif %}

            {% if messages %}
                {% for message in messages %}
                <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endfor %}
            {% endif %}

            {% if user_notifications %}
                {% for notification in user_notifications %}
                <div class="alert alert-{{ notification.message_type }} alert-dismissible fade show" role="alert">
                    {{ notification.message }}
                    {% if notification.related_url %}
                        <a href="{{ notification.related_url }}" class="alert-link ms-2" onclick="dismissNotification({{ notification.id }}, '{% url 'dismiss-notification' notification.id %}')">View</a>
                    {% endif %}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" onclick="dismissNotification({{ notification.id }}, '{% url 'dismiss-notification' notification.id %}')"></button>
                </div>
                {% endfor %}
            {% endif %}

            <div class='mb-2'></div>
            {% block content %}{% endblock %}
        </div>
      </div>

    </main>
    {% endblock %}