{% extends 'the_keep/base.html' %}

{% block head %}
<!-- Highlight.js CSS theme (GitHub style) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
<style>
    .code-container {
        background-color: #f6f8fa;
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 1rem;
        max-height: 600px;
        overflow-x: hidden;  /* Remove horizontal scroll */
        overflow-y: auto;    /* Keep vertical scroll if needed */
    }
    
    .code-container pre {
        white-space: pre-wrap; 
        word-break: break-word; 
    }
</style>    
{% endblock head %}

{% block content %}
<div class="container mt-4">


    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="h4 root-title">{{ rule.language }}{% if rule.post %} {{rule.post}}{% endif %} Law {{ rule }}</h1>
        <a href="{% url 'download-rule' rule.id %}" class="btn btn-primary" download>
            <i class="bi bi-download"></i> Download File
        </a>
    </div>


    <div class="code-container mb-2">
        <pre><code class="yaml">{{ file_content|escape }}</code></pre>
    </div>
</div>
{% endblock content %}

{% block scripts %}
<!-- Highlight.js JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/yaml.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        hljs.highlightAll();
    });
</script>
{% endblock scripts %}
